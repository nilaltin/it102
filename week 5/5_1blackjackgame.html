<!DOCTYPE html>
<html>
  <body>
    <h1>Blackjack Game</h1>

    <script>
      // Card object
      function Card(value) {
        this.value = value;
      }

      // Deck object
      function Deck() {
        this.cards = [];

        for (var i = 0; i < 52; i++) {
          var v = Math.ceil(11 * Math.random());
          this.cards.push(new Card(v));
        }

        this.dealCard = function () {
          var index = Math.floor(Math.random() * this.cards.length);
          var chosen = this.cards[index];
          this.cards.splice(index, 1);
          return chosen;
        };
      }

      var deck = new Deck();
      var playerTotal = 0;
      var dealerTotal = 0;
      var answer;

      // Player starts at total = 0
      while (playerTotal <= 21) {
        answer = prompt(
          "Current total: " + playerTotal + "  Take another card? (Y/N)"
        );

        if (answer == null) {
          // user clicked Cancel â€“ stop drawing
          break;
        }

        // make answer uppercase so 'y' or 'Y' both work
        answer = answer.toUpperCase();

        if (answer == "Y") {
          var card = deck.dealCard();
          playerTotal += card.value;
        } else {
          break;
        }
      }

      // Dealer draws 2 cards
      var d1 = deck.dealCard();
      var d2 = deck.dealCard();
      dealerTotal = d1.value + d2.value;

      alert("Your total: " + playerTotal + "\nDealer total: " + dealerTotal);

      // Win/Lose logic
      var result = "";

      if (playerTotal > 21) {
        result = "You busted! Dealer wins.";
      } else if (dealerTotal > 21) {
        result = "Dealer busted! You win!";
      } else if (playerTotal > dealerTotal) {
        result = "You win!";
      } else if (dealerTotal > playerTotal) {
        result = "Dealer wins.";
      } else {
        result = "It's a tie!";
      }

      alert(result);
    </script>
  </body>
</html>
